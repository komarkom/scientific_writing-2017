## Описание метода решения

Для решения задачи объединения карт препятсвий, составленных группой мобильных роботов, прделагается использовать метод распределённой согласованности[1], так как он является более универсальным и масштабируемым по сравнению с другими рассмотренными методами.

### Входные данные

1. Локальная карта робота i, построенная на k-ом шаге x<sub>i</sub><sup>k</sup>, содержащая координаты робота i и координаты признаков, обнаруженных данным роботом
2. Ковариционная матрица элементов локальной карты Σ<sub>i</sub><sup>k</sup>
3. Матрица наблюдений H<sub>i</sub><sup>k</sup>, все элементы которой принадлежат множеству {0; 1}. Данная матрица связывает локальную карту x<sub>i</sub><sup>k</sup> и вектор координат всех роботов и признаков x, таким образом, что верно соотношение x<sub>i</sub><sup>k</sup>=H<sub>i</sub><sup>k</sup>x
4. Множество соседей N<sub>i</sub><sup>k</sup>, показывающее, с какими роботами может взаимодействовать робот i на шаге k (робот i не входит в это множество)
5. Количество шагов K
6. Количество роботов n
7. Количество итераций на шаге обновления ввода l
8. Общее количество итераций L
9. Параметр γ>0
10. Размер шага h>0

### Выходные данные

1. Глобальная карта робота i, построенная на k-ом шаге x<sub>G;i</sub><sup>k</sup>, содержащая координаты робота i и координаты признаков, информация о которых получена от других роботов, а также самим роботом в результате наблюдений
2. Ковариционная матрица элементов глобальной карты Σ<sub>G;i</sub><sup>k</sup>

### Алгоритм работы

Введём локальную информационную матрицу I<sub>i</sub><sup>k</sup> и локальный информационный вектор i<sub>i</sub><sup>k</sup> для робота i на шаге k, определяемые следующими формулами:  
I<sub>i</sub><sup>k</sup>=(H<sub>i</sub><sup>k</sup>)^T^(Σ<sub>i</sub><sup>k</sup>)^-1^H<sub>i</sub><sup>k</sup>  
i<sub>i</sub><sup>k</sup>=(H<sub>i</sub><sup>k</sup>)^T^(Σ<sub>i</sub><sup>k</sup>)^-1^x<sub>i</sub><sup>k</sup>
Введём обозначение [M]<sub>rs</sub>, которое означает элемент матрицы M, находящийся в строке r и столбце s. Введём обозначение [v]<sub>r</sub>, которое означает элемент вектора-столбца v, находящийся в строке r. Выполним расчёт усреднённой информационной матрицы I<sub>avg,i</sub><sup>k</sup> и усреднённого информационного вектора i<sub>avg,i</sub><sup>k</sup>. Каждый элемент [I<sub>avg,i</sub><sup>k</sup>]<sub>rs</sub>, а также каждый элемент [i<sub>avg,i</sub><sup>k</sup>]<sub>r</sub>, вычисляется по алгоритму 1, при этом в качестве параметра u<sub>i</sub><sup>k</sup> используется значение элемента [I<sub>i</sub><sup>k</sup>]<sub>rs</sub> при расчёте [i<sub>avg,i</sub><sup>k</sup>]<sub>rs</sub>, и [i<sub>i</sub><sup>k</sup>]<sub>r</sub> при расчёте [i<sub>avg,i</sub><sup>k</sup>]<sub>r</sub>. Выходным значением алгоритма 1 является result. После завершения работы алгоритма данное значение записывается в [I<sub>avg,i</sub><sup>k</sup>]<sub>rs</sub> или [i<sub>avg,i</sub><sup>k</sup>]<sub>r</sub>.
Введём обозначение **I**, которое означает единичную матрицу размером n*n. Введём обозначение **0**, которое означает матрицу размера n*n, все элементы котрой являются нулями.
Алгоритм 1 будет использовать следующую формулу:  
![формула 1](1.png)  
где A задаётся формулой 2:  
![формула 2](2.png)  
где L - матрица Киргофа.  
Вычисление L осуществляется по следующей формуле: L=**I**-W~M~, где W~M~<sup>k</sup> - весовая матрица, элементы которой соответсвуют паре роботов с номерами i и j. Для расчёта элементов W~M~ используется формула 3:  
![формула 3](3.png)  
Алгоритм 1:
k = 1
y<sub>i</sub><sup>k</sup>(0)=0, w<sub>i</sub><sup>k</sup>(0) = 0
for k = 1, ...; K-1
	for t=0, ..., l-1
		вычислим y<sub>i</sub><sup>k</sup>(t+1) и w<sub>i</sub><sup>k</sup>(t+1) по формуле 1
	end for
	y<sub>i</sub>^k+1^(0)=y<sub>i</sub><sup>k</sup>(l), w<sub>i</sub>^k+1^(0)=w<sub>i</sub><sup>k</sup>(l)
end for
k=K
for t=0, ..., L-(K-1)*l-1
	вычислим y<sub>i</sub><sup>k</sup>(t+1) и w<sub>i</sub><sup>k</sup>(t+1) по формуле 1
end for
result=y<sub>i</sub><sup>k</sup>(L-(K-1)*l-1)

После вычисления усреднённой информационной матрицы I<sub>avg,i</sub><sup>k</sup> и усреднённого информационного вектора i<sub>avg,i</sub><sup>k</sup> производится вычисление глобальной карты x<sub>G;i</sub><sup>k</sup> и её ковариционной матрицы Σ<sub>G;i</sub><sup>k</sup> по формулам:
x<sub>G;i</sub><sup>k</sup>=(I<sub>avg,i</sub><sup>k</sup>)^-1^i<sub>avg,i</sub><sup>k</sup>
Σ<sub>G;i</sub><sup>k</sup>=(I<sub>avg,i</sub><sup>k</sup>)^-1^/n
## Источники

1. Rosario Aragues, Jorge Cortes, Carlos Sagues. Distributed Consensus on Robot Networks for Dynamically Merging Feature-Based Maps -  IEEE Transactions on Robotics
