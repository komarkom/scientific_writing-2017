# Архитектура платформы для создания мобильных приложений с обучающими outdoor-квестами
## Аннотация

В данной работе рассматривается архитектура платформы с открытым исходным кодом для создания мобильных приложений с обучающими outdoor-квестами. Особенностями данной платформы является открытость и генератор квестов, позволяющий автоматизировать часть работы по их созданию. Результатом данной работы является подробное описание архитектуры и генератора квестов.

## Введение

Современные технологии предлагают больше возможностей в сфере образования. Большая популярность мобильных технологий предоставляет удобный инструмент для интерактивного обучения посредством мобильных приложений [1]. На данный момент существует множество платформ, которые позволяют создавать outdoor-квесты, в которых пользователям предлагается решать интеллектуальные загадки, разгадывать местоположения познавательных мест. Однако у данных платформ существуют ограничения, главное из которых - закрытый код, что останавливает их развитие. Целью данной работы является проектирование архитектуры платформы с открытым исходным кодом, которая позволит создавать обучающие мобильные приложения с наборами outdoor-квестами. Для этого в статье будет проведет анализ аналогичных приложений и платформ, предложена собственная архитектура платформы и рассмотрен алгоритм автоматической генерации квестов.

## Сравнение аналогов

Так как в статье рассматривается архитектура платформы для создания мобильных приложений и для администрирования outdoor-квестов, то необходимо рассмотреть аналогичные платформы (для администрирования приложений/квестов) и приложения, которые позволяют эти квесты проходить. Для сравнения выбраны аналоги, являющиеся одними из самых популярных по результату поисковой выдачи Google, которые обладают одной или несколькими схожими идеями с предложенной в статье платформой.

### Сравнение аналогов приложений

1. **Geocaching [2]** - приложение, предлагающее найти при помощи карты и меток на них тайники и интересные места в реальной жизни. Активно используется туристами, интерес поддерживается при помощи статистики и соревновательной составляющей.

2. **Путеводитель iSpbGuide [3]** - приложение, являющееся путеводителем по историческим и культурным достопримечательностям по Санкт-Петербургу. Содержит в себе текстовую, графическую и звуковую информацию по достопримечательностям.

3. **Blippar [4]** - приложение, позволяющее получить информацию о любых вещах при помощи дополненной реальности и распознавания изображений. При помощи данных с видеокамеры телефона можно получить информацию о многих реальных вещах.

#### Критерии сравнения аналогов приложений

Для сравнения приложении выбраны критерий, которые позволяют увидеть насколько актуальны приложения подобного рода, связь с количеством информации и размером самого приложения.

- **Количество установок на Google Play** - количество установок показывает интерес к приложениям подобного рода.
- **Размер установленного приложения** - из-за малого количества памяти, которым располагают мобильные устройства, приложения должны занимать как можно меньше места, а так же это увеличивает их скорость установки при скачивании из интернета.
- **Количество квестов/информации** - важный критерий, показывающий информационную ценность приложения, наличие в нём контента для использования.

#### Выводы по итогам сравнения

Приложение | Количество установок на Google Play | Размер установленного приложения | Количество квестов/информации
---------- | ----------------------------------- | -------------------------------- | -----------------------------
Geocaching | 5 000 000–10 000 000 | 41,91 | > 1 000 000
Путеводитель iSpbGuide | 100 000–500 000 | 28,32 МБ | > 12
Blippar | 1 000 000–5 000 000 | 85,47 МБ | > 10 000 000

В результате сравнения существующих аналогов можно сказать, что интерес к приложениям подобного рода довольно большой, значительно зависит от качества приложения, в том числе размера. Если приложение слишком большое - пользователям будет сложнее его скачать. Количество информации в приложении показывает прямую зависимость с популярностью, что означает необходимым иметь инструмент для управлений этой информацией.

### Аналоги платформ

1. **Surprise Me [5]** - платформа для создания квестов в виде персональных мобильных приложений. Позволяет создавать различные квесты, в том числе по посещению определенных мест. Большинство созданных квестов платные.

2. **OUTDOOR ADVENTURE QUEST [6]** - аналогичная платформа, предоставляющая возможность создать собственный outdoor-квест. Созданные варианты ориентируются на путешественников, велосипедистов и групп людей, желающих устроить для себя проверку возможностей.

3. **12CODES [7]** - это интернет-сервис для проведения квестов. Он подходит почти для любых целей - от ночных авто-квестов до городских экскурсий.

#### Критерии сравнения аналогов платформ

В платформах более важно наличие необходимых инструментов и технологий, которые позволяют управлять квестами/приложениями и, по возможности, автоматизировать этот процесс.

- **География квестов** - критерий, показывающий развитие платформы - чем большую площадь охватывают квесты, тем больше возможностей у пользователей платформы.
- **Возможность создания собственного приложения** - создание квестов это важный момент, но наличие возможности создания собственного приложения даст пользователям большую свободу и гибкость.
- **Веб-интерфейс для создания квестов и приложений** - наличие веб-интерфейса очень важный элемент, который должен присутствовать у платформы, если она нацелена на обычных пользователей, а не только программистов.

#### Выводы по итогам сравнения

Платформа | География квестов | Возможность создания собственного приложения | Веб-интерфейс для создания квестов и приложений
---------- | ----------------------------------- | -------------------------------- | -----------------------------
Surprise Me | Большие города России | Отсутствует | Есть
OUTDOOR ADVENTURE QUEST | Весь мир | Отсутствует | Отсутствует
12CODES | Города России | Отсутствует | Есть

Во всех платформах отсутствует возможность создания собственного приложения, что сильно ограничивает пользователей таких платформ. Наличие веб-интерфейса понятного для любого пользователя является большим преимуществом и необходимостью

## Архитектура платформы

В этом разделе рассматривается архитектура будущей платформы. На рисунке 1 представлена схема этой архитектуры. Стоит отметить разделение архитектуры на три части, первая - веб-интерфейс, содержащий в себе генератора для автоматического создания квестов и сборщик мобильного приложения под нужды пользователя. Вторая часть - база данных, которая является промежуточным звеном между веб-интерфейсом и приложениями, которые будут генерироваться. Третья часть - набор сгенерированных приложений, для каждого из которых в базе данных будут храниться квесты для прохождения.

![Архитектура платформы](https://preview.ibb.co/jNG976/Architecture.png)
Рис 1. Архитектура платформы

### Веб-интерфейс

Для администрирования квестов и приложений пользователям нужен удобный интерфейс, который будет выполнен в виде сайта, к которому сможет получить доступ любой желающий. В нём также будут присутствовать автоматический генератор квестов, подробнее о котором рассказано в следующем разделе, и сборщик мобильных приложений с настройками пользователя. Приблизительный макет интерфейса представлен на рисунке 2.

![Шаблон веб-интерфейса](https://preview.ibb.co/fRN7S6/template.jpg)
Рис 2. Шаблон веб-интерфейса

### Генератор квестов

Принцип работы алгоритма генерации квестов будет многоступенчатым. На вход генератору будут подаваться исходные данные - максимальное количество мест в квесте, теги, определяющие тематику квестов (например, "Пётр 1", "Санкт-Петербург"). После чего будет происходить перебор всех возможных вариантов. На следующем этапе будут отсеиваться варианты, которые не подходят под главный критерий, чтобы квест был наиболее прямолинейным, не возвращая игрока в предыдущие места. Данный этап реализуется при помощи подсчета углов между тремя местами, если угол острее определенного порога - то квест не подходит. Наиболее оптимистичный вариант, когда все углы будут по 180 градусов, это будет означать, что маршрут квеста находится на одной прямой. На последнем этапе оставшиеся квесты будут отсортированы по длине маршрута, рассчитываемого при помощи API Яндекс.Карт [8]. На рисунке 3 изображен оптимальный вариант маршрута, полученный при помощи генератора квестов, а на рисунке 4 один из не оптимальных вариантов, как видно, второй маршрут заставит игрока плутать и возвращаться по прежним улицам. 

!["Хороший" вариант маршрута](https://image.ibb.co/fMCrn6/map1.jpg)
Рис 3. "Хороший" вариант маршрута

!["Плохой" вариант маршрута](https://image.ibb.co/kimHS6/map2.jpg)
Рис 4. "Хороший" вариант маршрута

### База данных

Для хранения всей информации о приложения, пользователях и квестах будет использоваться не реляционная СУБД - MongoDB. Именно документ ориентированность данной СУБД позволит хранить и быстро обрабатывать гео-данные и упростит обмен информацией с приложениями за счет использование формата JSON.

### Сгенерированные приложения

Одним из главных инструментов веб-интерфейса будет возможность сгенерировать мобильное приложение для заранее подготовленных квестов. Пользователю будут предлагаться набор настраиваемых параметров - набор квестов, цветовая тема, названия некоторых элементов приложения, в том числе название приложения, иконка, информацию о приложении.
Готовые приложения пользователей будет связываться напрямую с БД и использовать полученные данные, чтобы предоставить пользователям возможность выполнять интересные, развлекающие и обучающие квесты.

## Заключение
 
В результате данной работы была спроектирована и представлена архитектура платформы с открытым исходным кодом, которая позволяет создавать образовательные мобильные приложения с набором outdoor-квестов. В предложенной архитектуре ключевой является база данных, от правильной связи с веб-интерфейсом и приложениями будет зависеть работоспособность всей платформы.
На данный момент тестирование проходит генератор квестов и приложение, которое будет использоваться в качестве шаблона, в будущем планируется разработка веб-интерфейса, инструмента для генерации приложений и проектирование самой структуры БД.

## Список литературы

1. Mobile Education Landscape Report // GSMA.com. URL: http://www.gsma.com/connectedliving/wp-content/uploads/2012/03/landscape110811interactive.pdf (дата обращения 15.12.2017)
2. Geocaching® // Google Play. URL: https://play.google.com/store/apps/details?id=com.groundspeak.geocaching.intro (дата обращения 15.12.2017)
3. Путеводитель iSpbGuide // Google Play. URL: https://play.google.com/store/apps/details?id=iSpbGuide.com (дата обращения 15.12.2017)
4. Blippar // Google Play. URL: https://play.google.com/store/apps/details?id=com.blippar.ar.android (дата обращения 15.12.2017)
5. Surprise Me // surprizeme.ru. URL: https://surprizeme.ru/ (дата обращения 15.12.2017)
6. OUTDOOR ADVENTURE QUEST // outdooradventurequest.com. URL: http://outdooradventurequest.com/ (дата обращения 15.12.2017)
6. 12CODES // 12codes.ru. URL: https://12codes.ru/ (дата обращения 15.12.2017)
7. Заславский М.М., Мокрецов Р.М. Платформа для конструирования мобильных образовательных приложений на базе LBS-платформы GEO2TAG // Современные технологии в теории и практике программирования: материалы научно-практической конференции студентов, аспирантов и молодых ученых - 2017. - С. 67-70
8. API Яндекс.Карт // tech.yandex.ru. URL: https://tech.yandex.ru/maps/ (дата обращения 15.12.2017)