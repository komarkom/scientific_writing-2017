На рисунке 1 представлена диаграмма компонентов разработанной программной системы. 

![Рисунок 1 – Диаграмма компонентов программной системы](/images/pic_1.png) 

Выделим два уровня: 

- уровень ядра с универсальным программным интерфейсом (условное название: RDK – runtime development kit);

- уровень пользовательского приложения; 

Ядро системы разработано в стандарте языка ANSI C++. Пользовательский интерфейс разрабатывался с использованием Qt - кросс-платформенного фреймворка для разработки ПО, на языке программирования C++. Так же имеется пользовательский интерфейс разработанный в среде разработки Embarcadero C++ Builder. Помимо этого, используя только кроссплатформенное ядро RDK, можно создавать приложения для любых систем, поддерживающих стандарт C++ и имеющих реализацию библиотеки boost. 


Менеджер ядра (Manager) обеспечивает функции инициализации и деинициализации каналов расчета. Содержит обработчик исключений и главные средства журналирования, также каждый канал расчета имеет собственные средства журналирования.

Управляющий модуль (Engine) обеспечивает функционал по инициализации и деинициализации основных модулей канала расчета. Также управляющий модуль предоставляет унифицированный интерфейс взаимодействия с модулями своего канала расчета.

Хранилище объектов (Storage) в основу хранилища положен порождающие шаблоны проектирования «абстрактная фабрика» и «фабричный метод». Хранилище объектов содержит коллекцию компонентов, инициализируемую в конечном приложении модулем «Инициализация подключаемых библиотек» и выдает копии компонент по требованию, при этом ведет учет выделенных компонент и следит за правильным освобождением памяти.  Реализация компонентов может находиться в динамически подключаемых библиотеках. Стоит обратить внимание, что наполнение хранилища осуществляется в коде пользовательского приложения, поэтому для добавления новых компонентов в хранилище, требуется править код и пересобрать приложение. Так же имеется набор предопределённых структур базовых конфигураций хранилища. 

Управление моделью расчета (Environment), используя хранилище объектов, обеспечивает функционал по формированию структурной схемы модели, управлению отдельными компонентами модели, заданию входных данных модели для расчета и выдачу выходных данных. Все компоненты модели обязательно определенны в хранилище объектов. Каждая модель создается в отдельном канале, при этом всегда есть возможность параллельно работать с несколькими каналами, то есть с несколькими моделями. Это позволяет обрабатывать видеопоток из множества источников различными алгоритмами. 

Управление библиотекой RDK (UApplication) облегчает управление библиотекой. В этом модуле вводятся функции создания, загрузки и сохранения конфигурации модели (структура компонент модели, параметры компонент и параметры расчета), предоставляются унифицированные программные средства для выполнения циклического расчета модели в отдельных потоках, унифицированные средства удаленного управления приложением и т.п. 

 

**Архитектура решающего компонента**

Компонент (решающий модуль) – самодостаточная в рамках модели сущность. Имеет методы для связи с другими компонентами модели, может содержать в себе компоненты. В рамках своего владельца определяется уникальным строковым именем. Для прямого доступа к вложенному компоненту можно использовать составное строковое описание вида: 

“ComponentName1.SubComponentName2.SubComponentName3”. 

Предполагается, что большинство решающих компонентов модели используются по следующему сценарию: 

1. Создание экземпляра модуля. 

2. Назначение параметров по умолчанию (Default). 

3. Модификация параметров актуальными значениями. 

4. Инициализация (необходима для некоторых модулей, например, взаимодействующих с физическим устройством) (Init). 

5. Сборка внутренней структуры данных модуля в соответствии со значением параметров (например, выделение памяти для буферизированного набора кадров видеопотока). Этот этап может быть опущен и совмещен с одним из следующих. (Build). 

6. Переход в начальное состояние (Reset). 

7. Задание входных данных. 

8. Выполнение итерации расчета (Calculate). 

9. Считывание результата. 

10. Переход на п.6. 

11. Деинициализация по завершении работы (необходима для некоторых модулей, например, взаимодействующих с физическим устройством)  (UnInit). 

Для представления архитектуры компонента создан набор классов, представленный на рисунке 2.

![Рисунок 2 – Диаграмма классов решающего компонента](/images/pic_2.png) 

Для создания собственного компонента необходимо создать класс наследник абстрактного класса UNet, и определить нужные функции компонента. 

UModule – предоставляет интерфейс управления процессом счета. Класс предоставляет средства для автоматического восстановления внутренней структуры объекта и сброса процесса счета в исходное состояние при необходимости. 

UComponent – базовый класс описания компонент. Содержит указатель на компонента-владельца, и абстрактный метод создания копий компонента. 

UContainer ‒ полноценный компонент-контейнер, содержит массив указателей на волженные компоненты, средства управления и доступа к ним. 

UConnector ‒ получатель, предоставляет управление входами компонента, содержит список подключенных источников. 

UItem – источник, предоставляет управление выходами компонента, содержит список подключенных получателей. 

UNet – сеть, предоставляет удобную реализацию интерфейса, обеспечивающего организацию связей между компонентами, так же содержит сериализацию параметров. Этот класс является базовым для всех конечных компонент.


**Использование программной системы**

На рисунке 3 представлена диаграмма сценариев использования разработанного ПО.

![Рисунок 3 – Диаграмма сценариев использования](/images/pic_3.png)
 
Разработанные универсальные программные средства были использованы и отработаны в проектах ЦНИИ РТК. В частности, это относится к новым системам видеоаналитики, системе определения относительного движения космических аппаратов, системе управления универсальным спасательным средством и др. В приведенных примерах применялись программные средства с пользовательским интерфейсом, разработанным в Embarcadero C++ Builder. Однако в некоторых случаях, например в системе видеоаналитики, исполняемая часть программы разрабатывалась без пользовательского интерфейса в среде разработки MS Visual Studio. 

Также разработанные программные средства, применяются для создания систем управления, технического зрения и других систем с эффективной по производительности унифицированной архитектурой (статичной моделью), что позволило повысить скорость разработки систем, эффективней использовать разделение труда, увеличить надежность, повысить эффективность повторного использования кода, значительно упростить сопровождение и дальнейшее развитие функциональности систем. 

Разработанные программные средства могут быть эффективно использованы в качестве средств исследования и отработки сложных алгоритмов, активно применяются для моделирования искусственных нейронных сетей, близких к биологическим.
